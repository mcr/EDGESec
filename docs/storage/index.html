<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.8">
<link rel="alternate" type="application/rss+xml" href="/EDGESec/blog/rss.xml" title="EDGESec RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/EDGESec/blog/atom.xml" title="EDGESec Atom Feed"><title data-react-helmet="true">Secure Storage | EDGESec</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://nqminds.github.io/EDGESec/docs/storage"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Secure Storage | EDGESec"><meta data-react-helmet="true" name="description" content="The secure storage service implements a key/value store for all other services to store and retrieve encrypted keys or data. To encrypt data the secure storage generates keys that are encrypted using the hardware secure element or a user supplied passphrase."><meta data-react-helmet="true" property="og:description" content="The secure storage service implements a key/value store for all other services to store and retrieve encrypted keys or data. To encrypt data the secure storage generates keys that are encrypted using the hardware secure element or a user supplied passphrase."><link data-react-helmet="true" rel="shortcut icon" href="/EDGESec/img/network.svg"><link data-react-helmet="true" rel="canonical" href="https://nqminds.github.io/EDGESec/docs/storage"><link data-react-helmet="true" rel="alternate" href="https://nqminds.github.io/EDGESec/docs/storage" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://nqminds.github.io/EDGESec/docs/storage" hreflang="x-default"><link rel="stylesheet" href="/EDGESec/assets/css/styles.2a02d193.css">
<link rel="preload" href="/EDGESec/assets/js/runtime~main.46dad836.js" as="script">
<link rel="preload" href="/EDGESec/assets/js/main.8ceb7501.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_Zhym">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/EDGESec/"><div class="navbar__logo"><img src="/EDGESec/img/network.svg" alt="NQM Docusaurus Template Logo" class="themedImage_X7X7 themedImage--light_n7cD"><img src="/EDGESec/img/network.svg" alt="NQM Docusaurus Template Logo" class="themedImage_X7X7 themedImage--dark_WTCb"></div><b class="navbar__title">EDGESec</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/EDGESec/docs/">Documentation</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/EDGESec/docs/about">About</a><a href="https://github.com/nqminds/edgesec" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_tjMl"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_7DKP toggle_gM5N toggleDisabled_YcJ9"><div class="toggleTrack_pr3n" role="button" tabindex="-1"><div class="toggleTrackCheck_1VIP"><span class="toggleIcon_iGPa">ðŸŒœ</span></div><div class="toggleTrackX_-cNO"><span class="toggleIcon_iGPa">ðŸŒž</span></div><div class="toggleTrackThumb_4edW"></div></div><input type="checkbox" class="toggleScreenReader_BFa8" aria-label="Switch between dark and light mode"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_ntW3"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_Cy7D" type="button"></button><aside class="docSidebarContainer_ZbqI"><div class="sidebar_bpFd"><nav class="menu thin-scrollbar menu_fJBT"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Introduction</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/EDGESec/docs/">EDGESec Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/EDGESec/docs/control">Network Control</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/EDGESec/docs/capture">Network Capture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/EDGESec/docs/discovery">Device Discovery</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/EDGESec/docs/storage">Secure Storage</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Development</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Hardware</a></li></ul></nav></div></aside><main class="docMainContainer_QBea"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_R67y"><div class="docItemContainer_fRP7"><article><div class="theme-doc-markdown markdown"><header><h1>Secure Storage</h1></header><p>The secure storage service implements a key/value store for all other services to store and retrieve encrypted keys or data. To encrypt data the secure storage generates keys that are encrypted using the hardware secure element or a user supplied passphrase.</p><p>The secure storage is implemented as a sqlite database with two tables secrets and store.</p><p>The schema for the secrets table is as follows:</p><div class="codeBlockContainer_8VJT"><div class="codeBlockContent_meoT"><pre tabindex="0" class="prism-code language-undefined codeBlock_ltyB thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_ZWp2"><span class="token-line" style="color:#bfc7d5"><span class="token plain">CREATE TABLE secrets (id TEXT NOT NULL, value TEXT, salt TEXT, iv TEXT, PRIMARY KEY (id));</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TFIO clean-btn">Copy</button></div></div><p>where <strong>id</strong> is the ID of the generated key, <strong>value</strong> is the value of the key, <strong>iv</strong> the the IV used to encrypt and decrypt the key and <strong>salt</strong> is the salt sed ofr encryption and decryption when a userpasspharse is supplied.</p><p>An example of the secrets table row is given below:</p><table><thead><tr><th>ID</th><th>VALUE</th><th>SALT</th><th>IV</th></tr></thead><tbody><tr><td>master</td><td>LbknNO6o+s+u1b4wg9eGzQjHCanicVtDlDJBWZ0u4VaV25oIUCt1b5bthzLwhQO0</td><td>Z95m5G/+jgb3ga0dufa//w</td><td>hka2MmSUkJUJBf7TQMYnug</td></tr><tr><td>rest</td><td>a2UiZR/DLYb3hX61ZQ7Mb/vdVVIchJzkuNnoIhLDCHXe9453IlWjOfOymodUZIsq</td><td>RLdlnafYj7279lne7A5UoA</td><td>lgTKNxgxbeCxg4VySS/7vw</td></tr><tr><td>94:b9:7e:15:47:95</td><td>lPVf5wqMnb9+8Q8Cik5oetOI9MfA6qjPm1tKTR3WGPWgZYtaybEeDKWGX/x4EUUB</td><td>gFvI5tfeHANOafJlFsHXpg</td><td>mH2yeX/FEvJd1ilg25Zwcg</td></tr></tbody></table><p>The <strong>value</strong>, <strong>salt</strong> and <strong>iv</strong> are base64 encoded.</p><p>When a user or service wants to store a key/value she will need to provide and ID for the key that will be used to encrypt/decrypt the user&#x27;s value. If such an ID does not exists in the secrets table, the service will randomly generate one and encrypt it using the hardware secure element or the user supplied passphrase. When the user provides the passphrase the service will generate an encryption key using the \b salt and Password-Based Key Derivation Function Password-Based Key Derivation Function 2. The derived key is not stored on the device. If the user instead uses the hardware secure element, the key derivation, encryption and decryption is done in secure memory.</p><p>Each key/value is stored in the store table with the following schema:</p><div class="codeBlockContainer_8VJT"><div class="codeBlockContent_meoT"><pre tabindex="0" class="prism-code language-undefined codeBlock_ltyB thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_ZWp2"><span class="token-line" style="color:#bfc7d5"><span class="token plain">CREATE TABLE store (key TEXT NOT NULL, value TEXT, id TEXT, iv TEXT, PRIMARY KEY (key));</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TFIO clean-btn">Copy</button></div></div><p>where <strong>key</strong> is the key for the value, <strong>value</strong> is the value to be stored, <strong>id</strong> is the key id used to encrypt/decrypt the value and <strong>iv</strong> is the IV used to encrypt/decrypt the value.</p><p>An example of the store table rows is given below.</p><table><thead><tr><th>KEY</th><th>VALUE</th><th>ID</th><th>IV</th></tr></thead><tbody><tr><td>7815f8ce-57b8-49c8-9121-5b98986cbccd</td><td>GCM564Ugwyh0bW3f4JuFkw</td><td>master</td><td>Ja0pz9cdH7p3Q+BBP2MIrw</td></tr><tr><td>db07c38a-2842-4f45-9672-74d57ec99e63</td><td>23cHWe6r033czxopWsv6Ng</td><td>master</td><td>FU7hUGGbifro65cv0u0OwQ</td></tr><tr><td>1a35f54d-c5f9-4072-85b0-4b40f8fb4a14</td><td>LR3iRw6SrN/pWKSTJvNtrA</td><td>master</td><td>x9hFentG2Q6iynHXCk2ktA</td></tr><tr><td>831ffbb1-2e79-422a-bdad-e9e96a56d568</td><td>CdoxKK4PbDvWD9cOdRcTXQ</td><td>master</td><td>RHR1AGsjpWVHDR4VN2PiLA</td></tr></tbody></table><p>The <strong>value</strong> and <strong>iv</strong> is base64 encoded.</p><p>Each row of the key/value store contains the <strong>id</strong> of the key that was used to encrypt/decrypt the <strong>value</strong>. The encryption algorithm used is AES 256 CBC.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/nqminds/docusaurus-template/edit/master/docs/storage.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_QGlx" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_+nfr"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/EDGESec/docs/discovery"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->Device Discovery</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/EDGESec/docs/installation"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Installation<!-- --> Â»</div></a></div></nav></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Contact Us</div><ul class="footer__items"><li class="footer__item"><a href="http://nqmcyber.com" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_tjMl"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 NQMCyber LTD.<br>Built with Docusaurus.</div></div></div></footer></div>
<script src="/EDGESec/assets/js/runtime~main.46dad836.js"></script>
<script src="/EDGESec/assets/js/main.8ceb7501.js"></script>
</body>
</html>